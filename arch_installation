# Installation
# You might want to use cfdisk (tui) for partitioning
# https://wiki.archlinux.org/title/Installation_guide
# https://wiki.archlinux.org/title/GRUB
# https://github.com/NET-VLADOR/Arch-Linux-Install-Guide-RU - ignore xorg/GNOME
# related packages.
# xf86-video-intel seems to be not needed and not recommended
# https://wiki.archlinux.org/title/Intel_graphics
# https://wiki.archlinux.org/title/Microcode
# TODO: verify if something needs to be done after installation
# Grub is supposed to load it, see file::/boot/grub/grub.cfg
# Probably needs to be installed before running grub-mkconfig
sudo pacman -S intel-ucode


# NOTE:
# Check out https://wiki.archlinux.org/title/Hyprland
# Check out https://wiki.hypr.land/Useful-Utilities/
# Check out https://wearewaylandnow.com/

# TODO:
# ??? hyprshutdown, currently available only on AUR.
# hyprpicker

# To set a limit on battery charging put the battery-charge-limit.service
# in /etc/systemd/system/ and
# sudo systemctl daemon-reload
# sudo systemctl enable --now battery-charge-limit.service
# XXX: Some laptops (such as Dell) have its own battery settings.
# /sys/class/... settings may not be respected.
## Get/set BIOS settings
sudo pacman -S libsmbios
## Find out current mode (for DELL it's likely "adaptive")
sudo smbios-battery-ctl --get-charging-cfg
## Set "custom"
sudo smbios-battery-ctl --set-charging-mode=custom
## Set start-end interval
sudo smbios-battery-ctl --set-custom-charge-interval=<start> <end>

# hyprland https://wiki.archlinux.org/title/Hyprland
# I don't use uwsm. XXX: Should I? It's not recommended.
# I don't use display managers
# I don't think I need seatd service enabled.
sudo pacman -S hyprland
# notifications.
sudo pacman -S dunst
# To test notifications: notify-send
sudo pacman -S libnotify
# app launcher
sudo pacman -S hyprlauncher
# wallpaper
sudo pacman -S hyprpaper
# file manager
sudo pacman -S dolphin
# https://wiki.hypr.land/Hypr-Ecosystem/xdg-desktop-portal-hyprland/
sudo pacman -S xdg-desktop-portal-hyprland
# authentication agent https://wiki.hypr.land/Useful-Utilities/Must-have/#authentication-agent
# https://wiki.hypr.land/Hypr-Ecosystem/hyprpolkitagent/
sudo pacman -S hyprpolkitagent
# terminal emulator
sudo pacman -S ghostty
## Start ghostty on login in the background https://ghostty.org/docs/linux/systemd#starting-ghostty-at-login
systemctl enable --user app-com.mitchellh.ghostty.service
# lock screen and idling: hyprlock and hypridle
sudo pacman -S hyprlock
sudo pacman -S hypridle
# Make sure not to configure binds for lid switch in hyprland.conf - it will
# clash with corresponding settings in hypridle.conf.
# Be careful configuring hypr{idle,lock} with /etc/systemd/logind.conf - 
# configs may clash with each other causing unwanted systemd suspend.
# To check the lid status: cat /proc/acpi/button/lid/*/state
sudo pacman -S hyprsunset


# for external keyboard check hyprctl devices and make corresponding changes
# to hyprland.conf for your keyboard device name

# network
sudo pacman -S networkmanager
# nmtui or `nmcli device wifi` to configure wifi, wiki.archlinux.org/title/NetworkManager
# How to configure VPN with NetworkManager https://wiki.archlinux.org/title/NetworkManager#systemd-resolved
# Enable systemd-resolved sudo systemctl enable --now systemd-resolved.service
# Point /etc/resolv.conf to the systemd-resolved stub sudo ln -sf /run/systemd/resolve/stub-resolv.conf /etc/resolv.conf
# Tell NetworkManager to use systemd-resolved (optional but recommended) Create /etc/NetworkManager/conf.d/dns.conf with: [main] dns=systemd-resolved rc-manager=symlink
# Then: sudo systemctl restart NetworkManager

# multimedia
sudo pacman -S pipewire
sudo pacman -S wireplumber
## audio
sudo pacman -S pipewire-audio  # XXX: not sure if it's needed
sudo pacman -S pipewire-alsa
sudo pacman -S alsa-utils
### compatibility for pulseaudio. In waybar it's possible to use wireplumber module though
sudo pacman -S pipewire-pulse
systemctl --user enable --now wireplumber pipewire-pulse pipwire  # Might need to reboot after this
### enable auto-mute in alsamixer to automatically choose heaphone speakers, then sudo alsactl store
### Also unmute what's muted https://wiki.archlinux.org/title/Advanced_Linux_Sound_Architecture. XXX: I'm not sure it's really needed. It seems like everything works without it. After fidling with the settings I broke ability to mute my mic. Had to restore the default alsa settings. Need to be careful.
### GUI, used by default waybar (pulseaudio/wireplumber module)
sudo pacman -S pavucontrol

# bluetooth
sudo pacman -S blueman
sudo pacman -S bluez-utils  # bluetootchctl
# It happened to me once that I needed to restart the service because blueman-applet wasn't running
sudo systemctl enable --now bluetooth.service

# You may want to configure monitors https://wiki.hypr.land/Configuring/Monitors/

# fonts https://wiki.hypr.land/Useful-Utilities/Must-have/#fonts
## to render text
sudo pacman -S noto-fonts
## neovim
sudo pacman -S ttf-hack-nerd
## for default waybar icons
sudo pacman -S otf-font-awesome

# waybar
sudo pacman -S waybar
# power managment (used by default waybar)
# NOTE: '-ppd' because it provides compatibility with power-profiles-daemon for which there is a waybar module
sudo pacman -S tuned-ppd
sudo systemctl enable --now tuned
sudo systemctl enable --now tuned-ppd
# control brightness
sudo pacman -S brightnessctl
# waybar requires playerctl. Also see MPRIS https://wiki.archlinux.org/title/MPRIS

# shell
sudo pacman -S zsh
sudo pacman -S zsh-autosuggestions
sudo pacman -S zsh-syntax-highlighting
# prompt
sudo pacman -S starship

# misc
sudo pacman -S man-db
sudo pacman -S less
sudo pacman -S jq
sudo pacman -S openssh
# for wayland events: keycodes, mouse etc
sudo pacman -S wev
sudo pacman -S neovim
sudo pacman -S tmux
# for .dotfiles management
sudo pacman -S stow
sudo pacman -S ripgrep
sudo pacman -S fzf
# pacman db extraction utility, useful for exploring packages https://wiki.archlinux.org/title/Pacman/Tips_and_tricks
sudo pacman -S expac
# browser
sudo pacman -S firefox
# for building packages with makepkg
sudo pacman -S base-devel
sudo pacman -S git
# tg
sudo pacman -S telegram-desktop
# clipboard manager
## XXX: decided to go with fzf + .zshrc alias instead of wofi dmenu
sudo pacman -S cliphist
# screenshots
## grab image
sudo pacman -S grim
## select region
sudo pacman -S slurp
## snapshot editing
sudo pacman -S swappy
# image viewer
sudo pacman -S imv

